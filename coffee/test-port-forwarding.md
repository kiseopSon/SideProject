# 포트 포워딩 문제 해결 가이드

## 확인된 사항
✅ 서버는 `0.0.0.0:8101`에서 정상 리스닝 중
✅ 로컬 네트워크(`192.168.0.3:8101`) 접속 가능
✅ Windows 방화벽 규칙 추가 완료

## 문제 원인 진단

### 1. 라우터 포트 포워딩 설정 재확인
라우터 관리 페이지에서 다음을 확인하세요:

**필수 항목:**
- **서비스명/규칙명**: Spring Boot Gateway (아무거나 가능)
- **외부 포트**: `8101`
- **내부 IP**: `192.168.0.3` (반드시 확인!)
- **내부 포트**: `8101`
- **프로토콜**: `TCP` 또는 `Both`
- **상태**: `활성화` / `Enable` / `On`

**주의사항:**
- 내부 IP가 고정 IP인지 확인 (DHCP로 자동 할당되면 IP가 변경될 수 있음)
- 여러 규칙이 있을 경우 우선순위 확인
- 라우터 재부팅 후에도 설정이 유지되는지 확인

### 2. 라우터 자체 방화벽 확인
일부 라우터는 자체 방화벽이 있어 포트를 차단할 수 있습니다.
- 라우터 관리 페이지에서 "방화벽" 또는 "보안" 설정 확인
- 8101 포트가 허용되어 있는지 확인

### 3. ISP 차단 가능성
일부 인터넷 서비스 제공업체(ISP)는 특정 포트를 차단합니다.
- **8101 포트**가 차단될 수 있음
- 해결책: 다른 포트(예: 8081, 9000, 3000) 사용 후 테스트

### 4. 다른 보안 프로그램 확인
- Windows Defender 방화벽 외에도 다른 백신/보안 프로그램이 설치되어 있나요?
- 예: Kaspersky, Norton, McAfee, Bitdefender 등
- 해당 프로그램의 방화벽에서도 8101 포트를 허용해야 합니다.

## 해결 방법

### 방법 1: 다른 포트로 변경 테스트
ISP가 8101 포트를 차단할 수 있으므로 다른 포트로 테스트:

1. Gateway 서비스 포트 변경 (예: 9000)
2. 라우터 포트 포워딩도 새 포트로 변경
3. 외부에서 `http://180.233.237.67:9000` 접속 테스트

### 방법 2: 포트 포워딩 설정 삭제 후 재생성
라우터에서 기존 포트 포워딩 규칙을 삭제하고 다시 생성

### 방법 3: UPnP 사용 (간단하지만 보안 취약)
라우터에서 UPnP를 활성화하면 자동으로 포트가 열릴 수 있습니다.

### 방법 4: 라우터 재부팅
설정 변경 후 라우터를 재부팅하여 적용 확인

## 테스트 방법

### 로컬 테스트 (같은 네트워크)
```
http://192.168.0.3:8101
```
→ 이게 안 되면 방화벽 문제

### 외부 테스트 (다른 네트워크)
```
http://180.233.237.67:8101
```
→ 이게 안 되면 라우터 포트 포워딩 또는 ISP 차단

## 다음 단계
1. 같은 네트워크의 다른 기기(스마트폰, 태블릿)에서 `http://192.168.0.3:8101` 접속 테스트
2. 라우터 관리 페이지 접속하여 포트 포워딩 설정 재확인
3. 라우터 재부팅
4. 다른 포트(9000)로 변경 테스트

